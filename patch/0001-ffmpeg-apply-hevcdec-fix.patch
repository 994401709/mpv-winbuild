From 036c5a0130d0e6226b91985480c5f0fe65ce9385 Mon Sep 17 00:00:00 2001
From: zhongfly <11155705+zhongfly@users.noreply.github.com>
Date: Thu, 13 Jun 2024 15:32:56 +0800
Subject: [PATCH] ffmpeg: apply hevcdec fix

https://ffmpeg.org//pipermail/ffmpeg-devel/2024-June/329504.html
---
 packages/ffmpeg.cmake | 1 +
 1 file changed, 1 insertion(+)

diff --git a/packages/ffmpeg.cmake b/packages/ffmpeg.cmake
index 63ca894c8..d0d399085 100644
--- a/packages/ffmpeg.cmake
+++ b/packages/ffmpeg.cmake
@@ -51,6 +51,7 @@ ExternalProject_Add(ffmpeg
     GIT_CLONE_FLAGS "--sparse --filter=tree:0"
     GIT_CLONE_POST_COMMAND "sparse-checkout set --no-cone /* !tests/ref/fate"
     UPDATE_COMMAND ""
+    PATCH_COMMAND ${EXEC} curl -sL https://patchwork.ffmpeg.org/project/ffmpeg/patch/20240612081442.24114-1-anton@khirnov.net/mbox/ | git am --3way --whitespace=fix || git am --abort
     CONFIGURE_COMMAND ${EXEC} CONF=1 <SOURCE_DIR>/configure
         --cross-prefix=${TARGET_ARCH}-
         --prefix=${MINGW_INSTALL_PREFIX}
